<?xml version="1.0" encoding="UTF-8"?>
<ruleset name="DrupalStandards">
  <description>Drupal coding standards for search_api_postgresql module</description>

  <!-- File patterns to check -->
  <file>./src</file>
  <file>./tests</file>

  <!-- File extensions -->
  <arg name="extensions" value="php,module,inc,install,test,profile,theme"/>
  <arg value="p"/>

  <!-- Use PSR2 as base but with Drupal-specific customizations -->
  <rule ref="PSR2">
    <!-- Drupal allows underscores in method names for hook implementations -->
    <exclude name="PSR1.Methods.CamelCapsMethodName.NotCamelCaps"/>
    <!-- Drupal allows class names that don't follow PSR-1 -->
    <exclude name="PSR1.Classes.ClassDeclaration.MultipleClasses"/>
  </rule>

  <!-- Drupal-specific line length (80 chars preferred, 120 max) -->
  <rule ref="Generic.Files.LineLength">
    <properties>
      <property name="lineLimit" value="80"/>
      <property name="absoluteLineLimit" value="120"/>
    </properties>
  </rule>

  <!-- Drupal uses 2-space indentation -->
  <rule ref="Generic.WhiteSpace.ScopeIndent">
    <properties>
      <property name="indent" value="2"/>
      <property name="tabIndent" value="false"/>
    </properties>
  </rule>

  <!-- Drupal coding standards -->
  <rule ref="Generic.Files.EndFileNewline"/>
  <rule ref="Generic.Functions.FunctionCallArgumentSpacing"/>
  <rule ref="Generic.WhiteSpace.DisallowTabIndent"/>
  <rule ref="PEAR.Functions.ValidDefaultValue"/>
  <rule ref="Squiz.Arrays.ArrayBracketSpacing"/>
  <rule ref="Squiz.ControlStructures.ForEachLoopDeclaration"/>
  <rule ref="Squiz.ControlStructures.ForLoopDeclaration"/>
  <rule ref="Squiz.Functions.FunctionDeclarationArgumentSpacing">
    <properties>
      <property name="equalsSpacing" value="1"/>
    </properties>
  </rule>
  <rule ref="Squiz.PHP.LowercasePHPFunctions"/>
  <rule ref="Squiz.Strings.ConcatenationSpacing">
    <properties>
      <property name="spacing" value="1"/>
      <property name="ignoreNewlines" value="true"/>
    </properties>
  </rule>
  <rule ref="Squiz.WhiteSpace.FunctionSpacing">
    <properties>
      <property name="spacing" value="1"/>
    </properties>
  </rule>
  <rule ref="Squiz.WhiteSpace.OperatorSpacing">
    <properties>
      <property name="ignoreNewlines" value="true"/>
    </properties>
  </rule>

  <!-- Allow multiple classes per file for exception hierarchies -->
  <rule ref="PSR1.Classes.ClassDeclaration.MultipleClasses">
    <severity>0</severity>
  </rule>

</ruleset>